# lab2 实验报告

主要工作量在Visitor的各个访问方法的实现上。

我直接将表达式都计算成了一个常量。将来遇到非常量的表达式可能会重构……

整体思路是沿着 exp -> addExp -> mulExp -> unaryExp -> ... 往下一个函数一个函数地实现

回头又看了一下教程上用antlr实现一个计算器的demo，借鉴了传参方式：

1. 设定一个类内的全局变量，类型为int，用来表示当前结点的表达式值
2. 与表达式相关的节点的访问函数都会用到这一个变量，用法为：访问子节点后，记录子节点的表达式值 
3. 在本函数return前，将表达式值保存到这个变量

这样就可以用少数几个变量（仅需区分类型）来实现传参了！

## part3 正负号

unaryExp访问方法: 访问子节点，取结果，如果有负号，取相反数

## part4 四则运算+模运算

基本就是在mulExp和addExp访问方法中直接进行四则运算，不再赘述了

## 注

lab2我的实现比较简单的主要原因是我直接计算了表达式的值，而没考虑有变量的情况（尽管还没引入）

后面再重构


